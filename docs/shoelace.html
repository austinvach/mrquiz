<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mr.Quiz</title>
    <link rel="stylesheet" media="(prefers-color-scheme:light)"
        href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.13.1/cdn/themes/light.css" />
    <link rel="stylesheet" media="(prefers-color-scheme:dark)"
        href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.13.1/cdn/themes/dark.css"
        onload="document.documentElement.classList.add('sl-theme-dark');" />
    <script type="module"
        src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.13.1/cdn/shoelace-autoloader.js"></script>
        <style>
            html {
                font-family: var(--sl-font-sans);
                text-align: center;
                background-color: var(--sl-color-neutral-0);
            }
            body {
                margin: 0px;
            }
            header {
                background-color: var(--sl-color-primary-600);
            }
            #headerContent {
                font-size: var(--sl-font-size-x-large);
                font-weight: var(--sl-font-weight-bold);
                color: var(--sl-color-neutral-0);
                display:grid;
                grid-template-columns: repeat(3, 1fr);
                justify-content: center;
                align-items: center;
                max-width: 440px;
                margin: auto;
            }
            #title {
                grid-column: 2;
            }
            #settings {
                grid-column: 3;
                justify-self: end;
                color: var(--sl-color-neutral-0);
            }
            #middle {
                width: fit-content;
                margin: auto;
                margin-top: var(--sl-spacing-small);
            }
            sl-input {
                margin-top: var(--sl-spacing-2x-large);
            }
            #code-error {
              font-size: var(--sl-input-help-text-font-size-medium);
              color: var(--sl-color-danger-700);
            }
          
            #name-error ~ sl-button {
              margin-top: var(--sl-spacing-medium);
            }
          
            #middle sl-input {
              display: block;
            }
          
            /* user invalid styles */
            #middle sl-input[data-user-invalid]::part(base) {
              border-color: var(--sl-color-danger-600);
            }
          
            #middle [data-user-invalid]::part(form-control-label),
            #middle [data-user-invalid]::part(form-control-help-text) {
              color: var(--sl-color-danger-700);
            }
          
            #middle sl-input:focus-within[data-user-invalid]::part(base) {
              border-color: var(--sl-color-danger-600);
              box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-color-danger-300);
            }
          
            /* User valid styles */
            #middle sl-input[data-user-valid]::part(base) {
              border-color: var(--sl-color-success-600);
            }
          
            #middle [data-user-valid]::part(form-control-label),
            #middle [data-user-valid]::part(form-control-help-text) {
              color: var(--sl-color-success-700);
            }
          
            #middle sl-input:focus-within[data-user-valid]::part(base) {
              border-color: var(--sl-color-success-600);
              box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-color-success-300);
            }
            sl-radio-group {
                margin-top: var(--sl-spacing-medium);
            }
            sl-radio-group::part(form-control-label) {
                color: var(--sl-color-neutral-500);
            }
            sl-input::part(form-control-label) {
                color: var(--sl-color-neutral-500);
            }
            sl-input::part(input) {
                text-align: center;
            }
            sl-button {
                margin-top: var(--sl-spacing-large);
            }
            sl-icon-button::part(base) {
                color: var(--sl-color-neutral-0);
            }
            sl-icon-button::part(base):hover,
            sl-icon-button::part(base):focus {
                color: var(--sl-color-neutral-400);
            }
            footer {
                margin-top: var(--sl-spacing-large);
            }
            footer a {
                color: var(--sl-color-neutral-200);
            }
        </style>
        
</head>

<body>
    <header class="sl-theme-light">
        <div id="headerContent">
            <div id="title">MR.QUIZ</div>
            <sl-icon-button id="settings" name="gear" label="Settings"></sl-icon-button>
        </div>
    </header>
        <form id="middle" class="inline-validation">
            <sl-input name="code" placeholder="Code" type="numeric" size="large" pattern="\d{4}" required></sl-input>
            <div id="codeError" aria-live="polite" hidden></div>
            <sl-radio-group name="players" value="1">
                <sl-radio-button value="1">1 Player</sl-radio-button>
                <sl-radio-button value="2" disabled>2 Players</sl-radio-button>
            </sl-radio-group>
            <sl-radio-group label="Seconds to Respond" name="timeToRespond" value="30">
                <sl-radio-button value="15">15</sl-radio-button>
                <sl-radio-button value="30">30</sl-radio-button>
                <!-- <sl-radio-button value="45">45</sl-radio-button> -->
                <!-- <sl-radio-button value="60">60</sl-radio-button> -->
            </sl-radio-group>
            <div>
                <sl-button variant="neutral">Start</sl-button>
            </div>
        </form>
    <footer><a href="https://austinvach.com">Created by AV</a></footer>

    <script type="module">
        async function setupForm() {
            const form = document.querySelector('#middle');
            const codeError = document.querySelector('#codeError');
            const codeInput = form.querySelector('sl-input[name="code"]');

            // Wait for controls to be defined before attaching form listeners
            await Promise.all([
                customElements.whenDefined('sl-button'),
                customElements.whenDefined('sl-input'),
                customElements.whenDefined('sl-radio-button'),
                customElements.whenDefined('sl-radio-group')
            ]);

            // A form control is invalid
            form.addEventListener(
                'sl-invalid',
                event => {
                    // Suppress the browser's constraint validation message
                    event.preventDefault();

                    codeError.textContent = `Error: ${event.target.validationMessage}`;
                    codeError.hidden = false;

                    event.target.focus();
                },
                { capture: true } // you must use capture since sl-invalid doesn't bubble!
            );

            // Handle form submit
            form.addEventListener('submit', event => {
                event.preventDefault();
                codeError.hidden = true;
                codeError.textContent = '';
                setTimeout(() => alert('All fields are valid'), 50);
            });

            codeInput.addEventListener('sl-focus', event => {
                console.log("FOCUS");
            });

            codeInput.addEventListener('sl-blur', event => {
                console.log("LOST FOCUS");
            });

            console.log("YOLO");
        }

        setupForm();
    </script>
</body>

</html>